# #Old IMO 20 #

이러한 문제에서, 조건을 살펴보면 양의 정수를 짝수 혹은 4n + 1꼴, 4n + 3 꼴로 분류하고 있다.
따라서 숫자들을 2진수로 변환한 후 코드를 돌려 함수값을 관찰해보는 시도가 도움이 될 수 있다. 관찰을 통하여
2진수로 변환했을 때에 앞으로 읽으나 뒤로 읽으나 같은 수(대칭수) 에 대해서 f(n) = n 임을 알 수 있다.
(사실 이러한 종류의 뜬금없는 점화식은 관찰 없이는 매우 풀기 힘든 문제이다)

이를 정당화시키고 1988 이하의 그러한 수의 개수를 세자.
먼저 대칭수의 특징을 통하여 f(n) 이 n의 이진수 배열을 역으로 배열하여 만든 수임을 증명한다.
n을 n의 역배열로 대응시키는 함수를 g라고 놓고 
g가 조건 [1]~[5] 를 모두 만족시킴을 보인다.

[1], [2] - 자명.

[3] - 2n은 n의 이진수 배열의 끝에 0 을 하나 추가한 것이므로, n의 역배열과 2n의 역배열은 같은 수.

[4] - 4n+1 은 n의 이진수 배열의 끝에 01을 추가한 것이다. 즉 그 역배열은 10[n의 역배열] 이다. 이때 2n+1은 n의 끝에 1을 추가한 것이므로,
그 역배열은 1[n의 역배열] 이다. 즉 2g(2n+1) = 1[n의 역배열]0 이다. 여기서 [n의 역배열]0 부분은 2 * [n의 역배열] 이므로,
여기서 g(n) 을 빼면 10[n의 역배열] 임은 당연하다.

[5] - 4n+3 은 n의 이진수 배열의 끝에 11을 추가한 것이다. 즉 그 역배열은 11[n의 역배열] 이다. 이때 3g(2n+1) = 2g(2n+1) +g(2n+1) 임을
유념하자. 2g(2n+1) = 1[n의 역배열]0 이고, 여기서 2g(n) 을 빼면 [n의 역배열]0 부분이 사라진다. 여기 g(2n+1) 을 더하면 
사라졌던 부분이 1[n의 역배열] 로 대체되므로 당연히 11[n의 역배열] 이 된다.

따라서 g는 조건 [1] ~[5] 를 만족시킨다. 그런데, 조건을 모두 만족시키는 함수의 함수값은 n > 3이라면  그 밑의 함수값들에 대하여 온전히 값이 결정되고,
조건 [1], [2] 에 대하여 1과 3에서의 함수값은 고정되었으므로 그러한 함수는 유일하다. 따라서 f = g.

이제 1988 이하의 대칭수의 개수를 세기만 하면 된다. ( 1988 = 11111100101 (2) 이다.)
우선 자리수의 개수별로 분류하여 세고 더한다. 다음 조건을 만족시키면 대칭수이다.

1. 맨 처음과 맨 끝은 1 이어야 한다. (맨 처음은 1이어야 하므로 당연)

2. 짝수자리수라면 양끝을 제외한 나머지의 반을 자유롭게 정하면 다른 반은 정해진다.

3. 홀수자리수라면 가운데 자리수의 선택을 자유롭게 하고, 역시 그것 기준으로 양끝 제외 나머지의 반을 자유롭게 정하면 다른 반은 정해진다.

즉 2n+1, 2n+2 자릿수에 대하여 2^n개의 대칭수가 있다.
그런데 1988 이하라는 제약이 있으므로, 11자리수의 대칭수에 대해서는 이것을 고려하여 세어야 한다. 다행이도 1988은 1 1111 1 0010 1 이므로
(1111은 왼쪽 반에 가능한 수들 중에 가장 큰 수이므로 제약을 고려하더라도 개수를 세기 편하다.)
가운데자리 1 인 경우에 15개, 가운데자리 0 인 경우에도 15개로 총 30개가 있다.

이를 도합하면 총 92 개의 1988 이하의 대칭수가 있다. 답은 92.

